<!DOCTYPE html>
<html lang="en">
	<head>
	<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
	<script type='text/javascript' src='https://github.com/downloads/SteveSanderson/knockout/knockout-2.1.0.js'></script>
	<script type='text/javascript' src='https://github.com/SteveSanderson/knockout.mapping/tree/master/build/output'></script>
	<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
	<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
	
		<meta charset="utf-8">
		<title>Timeline JSON Template</title>
		<meta name="description" content="Template Description">
		
		
		<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
		<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<link href="Styles/timeline.css" rel="stylesheet">
		<script type="text/javascript" src="Scripts/timeline.js"></script>
		<script type="text/javascript" src="Scripts/timeline-min.js"></script>
		

		<style>
			html, body {
				height:100%;
				padding: 0px;
				margin: 0px;
			}
		</style>
		
	
	<script type="text/javascript">
		
		function getData(url) {
			ajaxWrapper(url, null, "GET");
		}

		function postData(url, data) {
			ajaxWrapper(url, data, "POST");
		}

		function ajaxWrapper(url, data, type, callback) {
			$.ajax({
				type: type,
				url: url,
				data: "{jsonObj : '" + data + "'}",
				dataType: "json",
				contentType: "application/json; charset=utf-8",
				dataFilter: function (data) {
					return filterData(data);
				},
				success: function (json) {
					if (!callback) callback = whatToDo;
					callback(json)
				},
				error: function (res, status) {
					errorHandling(res, status);
				}
			});
		}

		function filterData(data) {
			var response;

			if (typeof (JSON) !== "undefined" && typeof (JSON.parse) === "function")
				response = $.parseJSON(data);
			else
				response = eval("(" + data + ")");

			if (response.hasOwnProperty("d"))
				return response.d;
			else
				return response;
		}

		function errorHandling(res, status) {
			if (status === "error") {
				// errorMessage can be an object with 3 string properties: ExceptionType, Message and StackTrace
				var errorMessage = $.parseJSON(res.responseText);
				alert(errorMessage.Message);
			}
			if (status === "systemException") alert(res);
		}




		function whatToDo(json) {
			var timeline = new VMM.Timeline();
			timeline.init(json);
		}


	</script>

	<script type="text/javascript">
		$(function () {
			getData("WebService.asmx/getStaticJSON");
		});


			//timeline.init(json);
			//timeline.reload(json);
	</script>

</head>

	<body>
		
		<div id="timeline">


			</div>

		
	</body>
</html>
			